## All R files that are used must be listed here:

packages:
  - dplyr
  - magrittr
  - lubridate
  - tidyr
  - mvabund
  - ggplot2
  - lubridate
  - vegan
  - pryr
  - rmarkdown
  - vegan
  - readr

sources: 
  - R.scripts/FUNCTIONS_predator_diversity.R
  - R.scripts/FUNCTIONS_text.R
  - R.scripts/CALC_pd_experiment_models.R
  
  
targets:
  all: 
    depends:
      - MS/predatordiversity.md
      - MS/predatordiversity.pdf
      - MS/TABLE1.md
      - MS/predatordiversity.docx

# occurrance data -- abundance
  occur:
    command: read_csv("data/predator.cooccur.txt")
    
  # occurrance data -- metabolic capacity
  metabolic:
    command: read_csv("data/predator.cooccur.metabolic.txt")
    
  metabolic_occur_phylo:
    command: read_csv("data/metabolic_occur_phylo.csv")

# feeding trial data
  feeding_trials:
    command: read_csv("data/reorganized.feeding.trial.data.csv")

  diet_overlap_phylo:
    command: read_csv("data/diet_overlap_phylo.csv")

# enriched leaves -- ie just the N data for the detritus we put in.
# enriched <- read.csv("../data/enriched_leaves.csv",
#                      stringsAsFactors=FALSE) %>%   tbl_df()
# phylogeny data
  nodeages:
    command: read_csv("data/nodeages.csv")
    
  pd:
    command: read_csv("data/pd_exp_cleaned_data.csv")
    
  phylogenetic_distance:
    command: read.csv("data/phylogenetic_distance.csv", stringsAsFactors = FALSE)

## calculations

  pd_no_out:
    command: drop_outlier(pd)
    
  pd_experiment_phylo_dist:
    command: experiment_and_phylo(pd_no_out, phylogenetic_distance)
    
  modlist:
    command: make_modlist(pd_experiment_phylo_dist)
  
  MS/TABLE1.md:
    depends:
      - modlist
    knitr: true
    
  MS/predatordiversity.md:
    depends: 
      - pd_no_out
      - feeding_trials
      - nodeages
      - metabolic
      - metabolic_occur_phylo
      - diet_overlap_phylo
      - MS/TABLE1.md
      - data/exper.Rdata
    knitr: true
    
#  MS/predatordiversity.pdf:
#    depends:
#      - Figures/FIG_1.pdf
#      - Figures/FIG_2.pdf
#      - Figures/FIG_3.pdf
#    command: render("MS/predatordiversity.md")
    
  MS/predatordiversity.docx:
    depends:
      - Figures/FIG_1.png
      - Figures/FIG_2.png
      - Figures/FIG_3.png
    command: render("MS/predatordiversity.md", output_format = I("word_document"))
